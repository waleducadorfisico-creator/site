<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Consultoria — Wal Ribeiro</title>
  
  <style>
    :root{--bg:#f4f6f8;--card:#ffffff;--accent:#0b7285;--muted:#6b7280;--text:#0f1724}
    *{box-sizing:border-box}
    body{font-family:Inter,system-ui,Arial,sans-serif;background:var(--bg);color:var(--text);margin:0;padding:20px}
    .wrap{max-width:960px;margin:0 auto}
    header{display:flex;align-items:center;justify-content:space-between;gap:20px;margin-bottom:18px}
    h1{font-size:36px;margin:0}
    p.lead{margin:0;color:var(--muted);font-size:14px}
    form.card{background:var(--card);padding:18px;border-radius:12px;box-shadow:0 8px 30px rgba(2,6,23,0.06)}
    .grid{display:grid;grid-template-columns:1fr 1fr;gap:12px}
  .row{display:flex;gap:12px;align-items:center}
    label{font-size:13px;color:var(--muted);display:block;margin-bottom:6px}
    input[type=text], input[type=number], input[type=file], select, textarea{
      width:100%;padding:10px;border:1px solid #e6edf2;border-radius:8px;background:#fff;font-size:14px
    }
    textarea{min-height:80px;resize:vertical}
    .section{padding:10px 0;border-bottom:1px dashed #eef2f6;margin-bottom:8px}
    .section h2{margin:6px 0 8px;font-size:16px}
    .small{font-size:13px;color:var(--muted)}
    .actions{display:flex;gap:8px;margin-top:12px}
    button{padding:10px 14px;border-radius:8px;border:none;cursor:pointer}
    .btn-primary{background:var(--accent);color:#fff}
    .btn-ghost{background:#fff;border:1px solid #e6edf2}
    #preview{margin-top:16px;background:#fff;padding:18px;border-radius:10px;display:none;box-shadow:0 6px 20px rgba(0,0,0,0.08)}
    #preview img{width:120px;height:120px;border-radius:50%;object-fit:cover;border:3px solid #0b7285;display:block;margin-bottom:12px;}
    #preview h3{margin:6px 0}
    .two-col{display:grid;grid-template-columns:1fr 1fr;gap:12px}
  .flex-center{display:flex;align-items:center;gap:16px}
  /* utility classes to replace inline styles */
  .flex1{flex:1}
  .fixed-140{width:140px}
  .logo-img{width:130px;height:130px;border-radius:50%;object-fit:cover;border:4px solid white;box-shadow:0 4px 12px rgba(0,0,0,0.3)}

    @media(max-width:720px){
      .grid{grid-template-columns:1fr}
      .two-col{grid-template-columns:1fr}
      header{flex-direction:column;align-items:flex-start}
      /* make rows wrap and inputs full-width on small screens */
      .row{flex-wrap:wrap}
      .row > div{flex:1 1 100%; min-width:0}
      /* override inline fixed widths (140px) used in markup */
      .row > div[style]{width:100% !important}
      input[type=text], input[type=number], select, textarea{width:100%}
    }

    @media print{
      body{background:#fff;padding:0}
      .no-print{display:none}
      form.card{display:none}
      #preview{display:block}
      .wrap{max-width:100%;padding:12mm}
    }
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <div class="flex-center">
     <img id="logoImg" 
       src="https://lh3.googleusercontent.com/KeLoukTtmSRaT5BzWzH1lhxoyzRF9nTl3SHjZFZ8A7PR-_OUm38cto0_ILD9SbnRKzAgoIkRoAuCd6GZvQ=s265-w265-h265" 
       alt="Logo Wal Ribeiro" 
       class="logo-img">
        <div>
          <h1>Consultoria — Wal Ribeiro</h1>
          <p class="lead">Formulário interativo e dossiê do aluno. Visualize e gere PDF — a impressão sairá igual à visualização.</p>
        </div>
      </div>
      <div>
        <label class="small">Foto do aluno</label>
        <input type="file" id="fotoAluno" accept="image/*">
      </div>
    </header>

    <form class="card no-print" id="mainForm" onsubmit="return false">
      <!-- 1 Dados Pessoais -->
      <section class="section">
        <h2>1. Dados Pessoais</h2>
        <div class="grid">
          <div><label>Nome completo</label><input type="text" id="nome" /></div>
          <div><label>Data do atendimento</label><input type="text" id="data" placeholder="DD-MM-AAAA" /></div>
          <div><label>Idade</label><input type="number" id="idade" /></div>
          <div><label>Profissão</label><input type="text" id="profissao" /></div>
          <div><label>Contato</label><input type="text" id="contato" /></div>
          <div class="row">
            <div class="flex1"><label>Peso (kg)</label><input type="number" id="peso" step="0.1" /></div>
            <div class="fixed-140"><label>Altura (cm)</label><input type="number" id="altura" /></div>
            <div class="fixed-140"><label>% Gordura</label><input type="number" id="gordura" step="0.1" /></div>
          </div>
        </div>
      </section>

      <!-- 2 Saúde -->
      <section class="section">
        <h2>2. Histórico de Saúde</h2>
        <div class="grid">
          <div><label>Doenças / Medicações</label><textarea id="doencas"></textarea></div>
          <div><label>Lesões / Cirurgias</label><textarea id="lesoes"></textarea></div>
          <div><label>Qualidade do sono (0 a 10)</label><input type="number" id="sono" min="0" max="10" /></div>
          <div><label>Nível de estresse (0 a 10)</label><input type="number" id="estresse" min="0" max="10" /></div>
        </div>
      </section>

      <!-- 3 Estilo de Vida -->
      <section class="section">
        <h2>3. Estilo de Vida</h2>
        <div class="grid">
          <div><label>Horas de sono</label><input type="number" id="horasSono" step="0.5" /></div>
          <div><label>Consumo de água (L/dia)</label><input type="number" id="agua" step="0.1" /></div>
          <div class="full"><label>Alimentação</label><textarea id="alimentacao"></textarea></div>
          <div><label>Pratica outros esportes?</label><input type="text" id="outrosEsportes" /></div>
          <div><label>Fumante / Álcool</label><input type="text" id="habitos" /></div>
        </div>
      </section>

      <!-- 4 Objetivos -->
      <section class="section">
        <h2>4. Objetivos</h2>
        <div class="grid">
          <div>
            <label>Objetivos principais</label>
            <div style="display:flex;flex-direction:column;gap:6px;margin-top:6px">
              <label><input type="checkbox" name="objetivo" value="Perda de gordura"/> Perda de gordura</label>
              <label><input type="checkbox" name="objetivo" value="Hipertrofia"/> Hipertrofia</label>
              <label><input type="checkbox" name="objetivo" value="Condicionamento"/> Condicionamento físico</label>
              <label><input type="checkbox" name="objetivo" value="Saúde/Qualidade de Vida"/> Saúde/Qualidade de vida</label>
              <label><input type="checkbox" name="objetivo" value="Performance"/> Performance esportiva</label>
            </div>
          </div>
          <div><label>Meta curto prazo</label><textarea id="metaCurto"></textarea></div>
        </div>
      </section>

      <!-- 5 Medidas Iniciais -->
      <section class="section">
        <h2>5. Medidas Iniciais</h2>
        <div class="grid">
          <div><label>Braço Direito (cm)</label><input type="number" id="bracoDir" step="0.1" /></div>
          <div><label>Braço Esquerdo (cm)</label><input type="number" id="bracoEsq" step="0.1" /></div>
          <div><label>Peito (cm)</label><input type="number" id="peito" step="0.1" /></div>
          <div><label>Cintura (cm)</label><input type="number" id="cintura" step="0.1" /></div>
          <div><label>Quadril (cm)</label><input type="number" id="quadril" step="0.1" /></div>
          <div><label>Coxa Direita (cm)</label><input type="number" id="coxaDir" step="0.1" /></div>
          <div><label>Coxa Esquerda (cm)</label><input type="number" id="coxaEsq" step="0.1" /></div>
          <div><label>Panturrilha Direita (cm)</label><input type="number" id="panturrilhaDir" step="0.1" /></div>
          <div><label>Panturrilha Esquerda (cm)</label><input type="number" id="panturrilhaEsq" step="0.1" /></div>
          <div class="full"><label>Observações</label><textarea id="obsAvaliacao"></textarea></div>
        </div>
      </section>

      <!-- 6 Treino -->
      <section class="section">
        <h2>6. Planejamento do Treino</h2>
        <div class="grid">
          <div><label>Frequência</label><input type="text" id="frequencia" /></div>
          <div><label>Divisão</label><input type="text" id="divisao" /></div>
          <div class="full"><label>Exercícios</label><textarea id="exercicios"></textarea></div>
          <div><label>Volume/Intensidade</label><input type="text" id="volume" /></div>
          <div><label>Progressão</label><input type="text" id="progresso" /></div>
        </div>
      </section>

      <!-- 7 Orientações -->
      <section class="section">
        <h2>7. Orientações</h2>
        <div class="grid">
          <div class="full"><label>Dicas gerais</label><textarea id="orientacoes"></textarea></div>
          <div><label>Aquecimento</label><textarea id="aquecimento"></textarea></div>
          <div><label>Suplementos</label><input type="text" id="suplementos" /></div>
        </div>
      </section>

      <!-- 8 Acompanhamento -->
      <section class="section">
        <h2>8. Acompanhamento</h2>
        <div class="grid">
          <div><label>Reavaliação</label><input type="text" id="reavaliacao" /></div>
          <div><label>Métodos de registro</label><input type="text" id="registro" /></div>
          <div class="full"><label>Critérios de ajuste</label><textarea id="criterios"></textarea></div>
        </div>
      </section>

      <!-- 9 Observações -->
      <section class="section">
        <h2>9. Observações</h2>
        <div class="grid">
          <div class="full"><label>Anotações do aluno</label><textarea id="anotAluno"></textarea></div>
          <div class="full"><label>Anotações do professor</label><textarea id="anotProf"></textarea></div>
        </div>
      </section>

      <div class="actions">
        <button class="btn-primary" id="btnPreview">Visualizar</button>
        <button class="btn-ghost" id="btnPdf">Gerar PDF</button>
        <button class="btn-ghost" id="btnClear" type="button">Limpar</button>
      </div>
    </form>

    <div id="preview"></div>
  </div>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.9.2/html2pdf.bundle.min.js"></script>
  <script>
    const form = document.getElementById('mainForm');
    const preview = document.getElementById('preview');
    let fotoAlunoBase64 = "";

    document.getElementById('fotoAluno').addEventListener('change', e => {
      const file = e.target.files[0];
      if(file){
        const reader = new FileReader();
        reader.onload = ev => fotoAlunoBase64 = ev.target.result;
        reader.readAsDataURL(file);
      }
    });

    const collectValues = () => {
      const objetivos = Array.from(document.querySelectorAll('input[name="objetivo"]:checked')).map(i=>i.value).join(', ');
      const fields = Array.from(form.querySelectorAll('input, textarea'));
      const data = {};
      fields.forEach(f => data[f.id] = f.value || '---');
      data.objetivos = objetivos || '---';
      return data;
    }

    const nl2br = s => String(s).replace(/\n/g,'<br>');

    const renderPreview = () => {
      const d = collectValues();
      let html = `<div style="display:flex;align-items:center;gap:20px">`;
      html += `<img src="${document.getElementById('logoImg').src}" alt="Logo">`;
      if(fotoAlunoBase64) html += `<img src="${fotoAlunoBase64}" alt="Foto do Aluno">`;
      html += `</div>`;
      html += `<h2>Ficha de Consultoria — ${d.nome}</h2>`;
      html += `<p>Data: ${d.data} • Contato: ${d.contato}</p>`;
      html += `<p>Idade: ${d.idade} • Profissão: ${d.profissao}</p>`;

      html += `<h3>Medidas</h3>
               <p>Peso: ${d.peso}kg • Altura: ${d.altura}cm • Gordura: ${d.gordura}%</p>
               <p>Braço D: ${d.bracoDir}cm • Braço E: ${d.bracoEsq}cm<br>
               Peito: ${d.peito}cm • Cintura: ${d.cintura}cm • Quadril: ${d.quadril}cm<br>
               Coxa D: ${d.coxaDir}cm • Coxa E: ${d.coxaEsq}cm<br>
               Panturrilha D: ${d.panturrilhaDir}cm • Panturrilha E: ${d.panturrilhaEsq}cm</p>
               <p>Obs: ${nl2br(d.obsAvaliacao)}</p>`;

      html += `<h3>Histórico de Saúde</h3>
               <p>Doenças: ${nl2br(d.doencas)}<br>
               Lesões: ${nl2br(d.lesoes)}<br>
               Sono: ${d.sono}/10 • Estresse: ${d.estresse}/10</p>`;

      html += `<h3>Estilo de Vida</h3>
               <p>Sono: ${d.horasSono}h • Água: ${d.agua}L<br>
               Alimentação: ${nl2br(d.alimentacao)}<br>
               Hábitos: ${d.habitos} • Esportes: ${d.outrosEsportes}</p>`;

      html += `<h3>Objetivos</h3>
               <p>${d.objetivos}<br>
               Meta: ${nl2br(d.metaCurto)}</p>`;

      html += `<h3>Treino</h3>
               <p>Frequência: ${d.frequencia}<br>
               Divisão: ${d.divisao}<br>
               Exercícios: ${nl2br(d.exercicios)}<br>
               Volume: ${d.volume} • Progressão: ${d.progresso}</p>`;

      html += `<h3>Orientações</h3>
               <p>${nl2br(d.orientacoes)}<br>
               Aquecimento: ${nl2br(d.aquecimento)}<br>
               Suplementos: ${d.suplementos}</p>`;

      html += `<h3>Acompanhamento</h3>
               <p>Reavaliação: ${d.reavaliacao}<br>
               Registro: ${d.registro}<br>
               Critérios: ${nl2br(d.criterios)}</p>`;

      html += `<h3>Observações</h3>
               <p>Aluno: ${nl2br(d.anotAluno)}<br>
               Professor: ${nl2br(d.anotProf)}</p>`;

      preview.innerHTML = html;
      preview.style.display = 'block';
    }

    document.getElementById('btnPreview').onclick = renderPreview;
    document.getElementById('btnPdf').onclick = () => {
      renderPreview();
      html2pdf().set({filename:`consultoria_${Date.now()}.pdf`}).from(preview).save();
    };
    document.getElementById('btnClear').onclick = () => {
      form.reset(); preview.style.display='none'; preview.innerHTML=''; fotoAlunoBase64='';
    };
  </script>
</body>
</html>
